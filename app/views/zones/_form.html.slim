.row
  = form_for(@zone, html: {class: "form-horizontal form-bordered"}) do |f|
    .col-sm-6
      .form-group
        = f.label :name, class: "col-sm-2 control-label", style: "text-align: left"
        .col-sm-8
          = f.text_field :name, class: "form-control"
      .form-group
        = f.label :Descripci√≥n, class: "col-sm-2 control-label", style: "text-align: left"
        .col-sm-8
          = f.text_area :description, class: "form-control"
      .form-group
        .pull-right
          = link_to "Cancelar", :back ,class: "btn btn-danger mr-5"
          = f.submit "Guardar", class: "btn btn-success mr-5"
    .col-sm-6
      #zone_map style=("width: 100%; height: 400px;")
javascript:
  var points = []
  var map = new GMaps({
    el: '#zone_map',
    lat:  #{Setting.center[0]},
    lng:  #{Setting.center[1]},
    click: function(e) {
      var point = [e.latLng.lat(),e.latLng.lng()];
      markMap(e.latLng.lat(),e.latLng.lng());
      points.push(point)
      console.log(points)
    },
  });


  function markMap(lat, lng){
    map.addMarker({
      lat: lat,
      lng: lng,
      click: function(e){
        for(var i= 0;i < points.length; i++){
          if(points[i][0] == this.position.lat() && points[i][1] == this.position.lng()){
            map.removeMarkers();
            points.splice(i,1);
            for(var n = 0; n < points.length; n++){
              markMap(points[i][0],points[i][1])
            }
          }
        }
      },
    });

    paintMap()
  }

  function paintMap(){
    map.removePolygons();
    map.drawPolygon({
      paths: points,
      strokeColor: 'green'
    });
  }
